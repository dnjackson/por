<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Upvote: An Example Concept | The Essence of Software</title>
<meta name="keywords" content="upvote, catalog, concept" />
<meta name="description" content="An example of what a concept catalog entry might look like">
<meta name="author" content="Daniel Jackson">
<link rel="canonical" href="https://essenceofsoftware.com/posts/upvote/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.e4db30a8d25f1b926dc8f724a870ea241cdbcd775e10c551da53b91270fa3e99.css" integrity="sha256-5NswqNJfG5JtyPckqHDqJBzbzXdeEMVR2lO5EnD6Ppk=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://essenceofsoftware.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://essenceofsoftware.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://essenceofsoftware.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://essenceofsoftware.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://essenceofsoftware.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.86.0" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WRQ6HWW3ZW"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-WRQ6HWW3ZW', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Upvote: An Example Concept" />
<meta property="og:description" content="An example of what a concept catalog entry might look like" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://essenceofsoftware.com/posts/upvote/" /><meta property="og:image" content="https://essenceofsoftware.com/eos-twitter-card.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-17T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2021-11-17T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://essenceofsoftware.com/eos-twitter-card.png"/>

<meta name="twitter:title" content="Upvote: An Example Concept"/>
<meta name="twitter:description" content="An example of what a concept catalog entry might look like"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://essenceofsoftware.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Upvote: An Example Concept",
      "item": "https://essenceofsoftware.com/posts/upvote/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Upvote: An Example Concept",
  "name": "Upvote: An Example Concept",
  "description": "An example of what a concept catalog entry might look like",
  "keywords": [
    "upvote", "catalog", "concept"
  ],
  "articleBody": "Concepts provide a framework for recording design experience. Designers often find themselves reinventing the wheel, designing and deploying concepts that have been built many times before, and then rediscovering a raft of subtle problems that were already known.\nMy dream is to have a concept catalog (or a collection of concept catalogs, perhaps organized by domains) that would hold a collection of concept definitions, and with each the accumulated experience and design wisdom from previous deployments of that concept.\nAs an example of what such a catalog entry might look like, here is a sample entry for the Upvote concept. Comments, suggestions and reactions welcome in the forum topic for this example.\nThis idea is inspired, of course, by the success of design patterns in programming.\nName: Upvote [Item, User]\nPurpose: Track relative popularity of items\nAlso known as: Like\nRelated concepts:\nReaction (send emotional reaction to author of post)\nRecommendation (track user approvals for future recommendations)\nModerate (maintain quality of forum by approving submissions)\nKarma (grant privileges to users based on good behavior)\nFlag (crowdsource moderation by having users mark bad items)\nState:\nupvotes, downvotes: Item - set User count: Item - one Int // item's count is defined as number of ups minus downs // all i: Item | i.count = #i.upvotes - #i.downvotes  Actions:\n\u2028upvote (i: Item, u: User)\u2028u not in i.upvotes i.upvotes += u i.downvotes -= u downvote (i: Item, u: User)\u2028u not in i.downvotes i.downvotes += u i.upvotes -= u unvote (i: Item, u: User)\u2028u in i.(upvotes+downvotes) i.upvotes -= u i.downvotes -= u  Operational principle:\nafter a sequence of upvote and downvote actions, the count of an item is equal to the number of users who upvoted minus the number who downvoted  General notes\nSyntax. Since this is the first concept that I’m adding to the catalog, here are a few notes on the syntax I’m using. This is the structure I use in EOS, but with more formal definitions of the actions. I’m using Alloy-like syntax for expressions and statements, which is hopefully intuitive even to those unfamiliar with Alloy. The state and actions part of the concept model is not new to concept design; it’s just a definition of a state machine activated by atomic actions as you’d find in any formal modeling language (such as TLA+, B, Z, VDM, OCL).\nDeclarations. The declaration r: A - B declares a relation from A to B, constrained by any multiplicities (using the keywords one for exactly one, lone for zero or one, some for one or more, and set for zero or more).\nAction definitions. Action definitions can include constraints on the pre-state, as well as update statements. For example, in upvote, the first line is a precondition saying that you can’t upvote an item if you’ve already upvoted it. An update statement changes a relation, using +/- for adding and removing tuples. For example, in upvote, the second line says that the set of users associated with the item i in the upvotes relation is increased by u (or, equivalently, the tuple i-u is added to the relation).\nType parameters. The list of types after the name of the concept gives the type parameters. These are types that are polymorphic, and can be bound to other types when the concept is composed. In this case, all the types are parameters. The Item type, for example, may be bound to Comment or Post in another concept, and the User type may be bound to any kind of principal (as the term is used in the security community).\nOperational principle. The OP is given informally. As explained in EOS, it’s an archetypal scenario, and unlike use cases, doesn’t need to cover all the functionality (so note that unvote is not mentioned). In this case, it looks a bit pathological because the concept is pretty simple: it basically just counts votes.\nDesign issues\nNegative count. This design allows counts to go negative. An alternative is to make a minimum of zero (even if the number of downvotes is still tracked implicitly).\nUnvote as own action. In some deployments, you may use downvote to let a user reverse their upvote action instead of unvote, but this won’t work if downvoting is limited (eg, by Karma) to certain users (as in Hacker News).\nUsing count. The count of an item can be used in different ways. Often it is shown to users, and is used to determine the rank order in which items appear. Sometimes the count is used directly for item ordering (as in comments in the NY Times), but more complex schemes are common: in Hacker News, for example, the rank of a post is computed from the number of points, the post’s age, and other factors.\nPreventing double voting. This design prevents a user from voting twice on a single item. In practice, this requires either tracking the identity of the user (eg, with session tokens), or by using a proxy for the user, such as the IP address, MAC address or browser id.\nVisibility. Usually only the count relation (and not the upvotes and downvotes relations) is made visible, so users cannot see who voted for an item. For Facebook “likes”, usernames are visible, but that can be seen as an artifact of combining the Upvote concept with the Reaction concept.\nEventual consistency. Getting exact counts is generally not required, so common implementations scale by not requiring strong consistency. This means that a user who upvotes an item will generally see that item’s count increase, but may not see the effect of a simultaneous (or even earlier) upvote from another user until later.\nKnown uses. Universally used in all social media apps, typically for posts and comments. Facebook combines the Upvote, Reaction and Recommendation concepts into a single “Like” concept, with some confusing outcomes (for example, that an angry reactions counts as an upvote).\nSynchronizations. Commonly synchronized with authoring concepts (such as Comment and Post), and with Karma (where an upvote may be synchronized with a reward action, so that a user needs to obtain some number of upvotes before reaching a certain karma level).\n",
  "wordCount" : "1024",
  "inLanguage": "en",
  "datePublished": "2021-11-17T00:00:00Z",
  "dateModified": "2021-11-17T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Daniel Jackson"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://essenceofsoftware.com/posts/upvote/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "The Essence of Software",
    "logo": {
      "@type": "ImageObject",
      "url": "https://essenceofsoftware.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://essenceofsoftware.com" accesskey="h" title="The Essence of Software (Alt + H)">The Essence of Software</a>
            <span class="logo-switches">
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://essenceofsoftware.com/ask/" title="Q&amp;A">
                    <span>Q&amp;A</span>
                </a>
            </li>
            <li>
                <a href="https://essenceofsoftware.com/buy/" title="Buy">
                    <span>Buy</span>
                </a>
            </li>
            <li>
                <a href="https://essenceofsoftware.com/reviews/" title="Reviews">
                    <span>Reviews</span>
                </a>
            </li>
            <li>
                <a href="https://essenceofsoftware.com/author/" title="Author">
                    <span>Author</span>
                </a>
            </li>
            <li>
                <a href="https://essenceofsoftware.com/posts/" title="Goodies">
                    <span>Goodies</span>
                </a>
            </li>
            <li>
                <a href="https://essenceofsoftware.com/subscribe/" title="Subscribe">
                    <span>Subscribe</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Upvote: An Example Concept
    </h1>
    <div class="post-description">
      An example of what a concept catalog entry might look like
    </div>
    <div class="post-meta"><span title='2021-11-17 00:00:00 +0000 UTC'>November 17, 2021</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Daniel Jackson&nbsp;|&nbsp;<a href="https://forum.softwareconcepts.io/t/upvote-sample-concept-catalog-entry/32" rel="noopener noreferrer" target="_blank">Comments</a>

</div>
  </header> 

  <div class="post-content"><p>Concepts provide a framework for recording design experience. Designers often find themselves reinventing the wheel, designing and deploying concepts that have been built many times before, and then rediscovering a raft of subtle problems that were already known.</p>
<p>My dream is to have a concept catalog (or a collection of concept catalogs, perhaps organized by domains) that would hold a collection of concept definitions, and with each the accumulated experience and design wisdom from previous deployments of that concept.</p>
<p>As an example of what such a catalog entry might look like, here is a sample entry for the Upvote concept. Comments, suggestions and reactions welcome in the <a href="https://forum.softwareconcepts.io/t/upvote-sample-concept-catalog-entry/32">forum topic</a> for this example.</p>
<p>This idea is inspired, of course, by the success of design patterns in programming.</p>
<p><strong>Name:</strong> Upvote [Item, User]</p>
<p><strong>Purpose:</strong> Track relative popularity of items</p>
<p><strong>Also known as:</strong> Like</p>
<p><strong>Related concepts:</strong><br>
Reaction (send emotional reaction to author of post)<br>
Recommendation (track user approvals for future recommendations)<br>
Moderate (maintain quality of forum by approving submissions)<br>
Karma (grant privileges to users based on good behavior)<br>
Flag (crowdsource moderation by having users mark bad items)</p>
<p><strong>State:</strong></p>
<pre><code>upvotes, downvotes: Item -&gt; set User  
count: Item -&gt; one Int  
// item's count is defined as number of ups minus downs  
// all i: Item | i.count = #i.upvotes - #i.downvotes
</code></pre>
<p><strong>Actions:</strong></p>
<pre><code> upvote (i: Item, u: User)   
  u not in i.upvotes
  i.upvotes += u
  i.downvotes -= u

downvote (i: Item, u: User)   
  u not in i.downvotes
  i.downvotes += u
  i.upvotes -= u

unvote (i: Item, u: User)   
  u in i.(upvotes+downvotes)
  i.upvotes -= u
  i.downvotes -= u 
</code></pre>
<p><strong>Operational principle:</strong></p>
<pre><code>after a sequence of upvote and downvote actions,  
the count of an item is equal to the number of users  
who upvoted minus the number who downvoted
</code></pre>
<p><strong>General notes</strong></p>
<p><em><strong>Syntax</strong></em>. Since this is the first concept that I&rsquo;m adding to the
catalog, here are a few notes on the syntax I&rsquo;m using. This is the structure I use in <a href="https://essenceofsoftware.com">EOS</a>, but with more formal definitions of the actions. I&rsquo;m using <a href="alloytools.org">Alloy</a>-like syntax for expressions and statements, which is hopefully intuitive even to those unfamiliar with Alloy. The state and actions part of the concept model is not new to concept design; it&rsquo;s just a definition of a state machine activated by atomic actions as you&rsquo;d find in any formal modeling language (such as TLA+, B, Z, VDM, OCL).</p>
<p><em><strong>Declarations</strong></em>. The declaration <code>r: A -&gt; B</code> declares a relation from <code>A</code> to <code>B</code>, constrained by any multiplicities (using the keywords <code>one</code> for exactly one, <code>lone</code> for zero or one, <code>some</code> for one or more, and <code>set</code> for zero or more).</p>
<p><em><strong>Action definitions</strong></em>. Action definitions can include constraints on the pre-state, as well as update statements. For example, in <code>upvote</code>, the first line is a precondition saying that you can&rsquo;t upvote an item if you&rsquo;ve already upvoted it. An update statement changes a relation, using +/- for adding and removing tuples. For example, in <code>upvote</code>, the second line says that the set of users associated with the item <code>i</code> in the <code>upvotes</code> relation is increased by <code>u</code> (or, equivalently, the tuple <code>i-&gt;u</code> is added to the relation).</p>
<p><em><strong>Type parameters</strong></em>. The list of types after the name of the concept gives the type parameters. These are types that are polymorphic, and can be bound to other types when the concept is composed. In this case, all the types are parameters. The <code>Item</code> type, for example, may be bound to <code>Comment</code> or <code>Post</code> in another concept, and the <code>User</code> type may be bound to any kind of principal (as the term is used in the security community).</p>
<p><em><strong>Operational principle</strong></em>. The OP is given informally. As explained in EOS, it&rsquo;s an archetypal scenario, and unlike use cases, doesn&rsquo;t need to cover all the functionality (so note that unvote is not mentioned). In this case, it looks a bit pathological because the concept is pretty simple: it basically just counts votes.</p>
<p><strong>Design issues</strong></p>
<p><em><strong>Negative count</strong></em>. This design allows counts to go negative. An alternative is to make a minimum of zero (even if the number of downvotes is still tracked implicitly).</p>
<p><em><strong>Unvote as own action</strong></em>. In some deployments, you may use <code>downvote</code> to let a user reverse their <code>upvote</code> action instead of <code>unvote</code>, but this won&rsquo;t work if downvoting is limited (eg, by Karma) to certain users (as in Hacker News).</p>
<p><em><strong>Using count</strong></em>. The count of an item can be used in different ways. Often it is shown to users, and is used to determine the rank order in which items appear. Sometimes the count is used directly for item ordering (as in comments in the NY Times), but more complex schemes are common: in Hacker News, for example, the rank of a post is computed from the number of points, the post&rsquo;s age, and other factors.</p>
<p><em><strong>Preventing double voting</strong></em>. This design prevents a user from voting twice on a single item. In practice, this requires either tracking the identity of the user (eg, with session tokens), or by using a proxy for the user, such as the IP address, MAC address or browser id.</p>
<p><em><strong>Visibility</strong></em>. Usually only the count relation (and not the upvotes and downvotes relations) is made visible, so users cannot see who voted for an item. For Facebook &ldquo;likes&rdquo;, usernames are visible, but that can be seen as an artifact of combining the Upvote concept with the Reaction concept.</p>
<p><em><strong>Eventual consistency</strong></em>. Getting exact counts is generally not required, so common implementations scale by not requiring strong consistency. This means that a user who upvotes an item will generally see that item&rsquo;s count increase, but may not see the effect of a simultaneous (or even earlier) upvote from another user until later.</p>
<p><em><strong>Known uses</strong></em>. Universally used in all social media apps, typically for posts and comments. Facebook combines the Upvote, Reaction and Recommendation concepts into a single &ldquo;Like&rdquo; concept, with some confusing outcomes (for example, that an angry reactions counts as an upvote).</p>
<p><em><strong>Synchronizations</strong></em>. Commonly synchronized with authoring concepts (such as Comment and Post), and with Karma (where an upvote may be synchronized with a reward action, so that a user needs to obtain some number of upvotes before reaching a certain karma level).</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://essenceofsoftware.com/tags/upvote/">upvote</a></li>
      <li><a href="https://essenceofsoftware.com/tags/catalog/">catalog</a></li>
      <li><a href="https://essenceofsoftware.com/tags/concept/">concept</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://essenceofsoftware.com/posts/subscribe/">
    <span class="title">« Prev Page</span>
    <br>
    <span>Design Updates in Your Mailbox</span>
  </a>
  <a class="next" href="https://essenceofsoftware.com/posts/acm-tech-talk/">
    <span class="title">Next Page »</span>
    <br>
    <span>ACM tech talk</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">


    <span>&copy; 2022 <a href="https://essenceofsoftware.com">Daniel Jackson</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
